<!DOCTYPE html>
<html>
    <head lang="en">
        <title>发布兼职</title>
        <meta charset="UTF-8" />
        <meta name="keywords" content="兼职，大学生，真实，100%，无中介" />
        <meta name="description" content="" />
        <!--主页可被检索，页面上链接可被查询-->
        <meta name="robots" content="index,follow" />
        <!--使用goole内核进行渲染-->
        <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1" />
        <!--移动端页面-->
        <meta name="viewport" content="width=device-width,initial-scale=0.5,minimum-scale=0.3,maximum-scale=2.0,user-scalable=yes" />
        <meta content="yes" name="apple-mobile-web-app-capanle" />
        <meta content="black" name="apple-mobile-apps-status-bar-style" />
        <meta content="telephone=no" name="format-detection" />
        <!--图标显示-->
        <link rel="shortcut icon" href="img/icon.png" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/signup.css" />

        <!-- Bootstrap -->
        <link rel="stylesheet" media="screen" href="bootstrap-3.3/css/bootstrap.min.css" />
        <link rel="stylesheet" media="screen" href="bootstrap-3.3/css/bootstrap-theme.min.css" />

        <!-- Bootstrap Admin Theme -->
        <link rel="stylesheet" media="screen" href="bootstrap-3.3/bootstrap-admin-theme.css" />
        <link rel="stylesheet" media="screen" href="bootstrap-3.3/bootstrap-admin-theme-change-size.css"/>

        <!--日期样式-->
        <link rel="stylesheet" href="bootstrap-datepicker/css/datepicker.css" />

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
           <script type="text/javascript" src="script/html5shiv.js"></script>
           <script type="text/javascript" src="script/respond.min.js"></script>
        <![endif]-->
    </head>
    <script>
    </script>
    <!--map stlye-->
    <style>
        #mapContainer{
            display: none;
        }
    </style>
    <body class="bootstrap-admin-with-small-navbar">
        <!-- small navbar -->
        <nav class="navbar navbar-default navbar-fixed-top bootstrap-admin-navbar-sm" role="navigation">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="collapse navbar-collapse">
                            <ul class="nav navbar-nav navbar-right">
                                <li class="dropdown">
                                    <a href="#" role="button" class="dropdown-toggle" data-hover="dropdown"> <i class="glyphicon glyphicon-user"></i> <span id="username">用户名</span> <i class="caret"></i></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="forms.html">发布兼职</a></li>
                                        <li><a href="userprofile.html">编辑个人资料</a></li>
                                        <li><a href="index.html">注销</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- main / large navbar -->
        <nav class="navbar navbar-default navbar-fixed-top bootstrap-admin-navbar bootstrap-admin-navbar-under-small" role="navigation">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                            <a class="navbar-brand" href="index.html">诚客兼职</a>
                    </div>
                </div>
            </div><!-- /.container -->
        </nav>

        <div class="container">
            <!-- left, vertical navbar & content -->
            <div class="row">
                <!-- left, vertical navbar -->
                <div class="col-md-2 bootstrap-admin-col-left">
                    <ul class="nav navbar-collapse collapse bootstrap-admin-navbar-side">
                        <li>
                            <a href="userprofile.html"><i class="glyphicon glyphicon-chevron-right"></i>编辑个人资料</a>
                        </li>
                        <li class="active">
                            <a href="forms.html"><i class="glyphicon glyphicon-chevron-right"></i>发布兼职</a>
                        </li>
                        <li>
                            <a href="tables.html"><i class="glyphicon glyphicon-chevron-right"></i> 已发布的兼职</a>
                        </li>
                    </ul>
                </div>

                <!-- content -->
                <div class="col-md-10">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="page-header">
                                <h1>发布兼职</h1>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div class="panel panel-default bootstrap-admin-no-table-panel">
                                <div class="panel-heading">
                                    <div class="text-muted bootstrap-admin-box-title">请填写兼职相关资料</div>
                                </div>
                                <div class="bootstrap-admin-no-table-panel-content bootstrap-admin-panel-content collapse in">
                                    <form id="publicJob" class="form-horizontal">
                                        <fieldset>
                                            <legend>请详细填写</legend>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobName">兼职名称：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobName" type="text" placeholder="请输入兼职名称" name="jobName" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobType">类型：</label>
                                                <div class="col-lg-10">
                                                    <select class="form-control" name="jobType">
                                                        <option value="1">礼仪</option>
                                                        <option value="2">传单</option>
                                                        <option value="3">会展</option>
                                                        <option value="4">开发</option>
                                                        <option value="5">销售</option>
                                                        <option value="6">服务</option>
                                                        <option value="7">设计</option>
                                                        <option value="8">其他</option>
                                                    </select>
                                                    </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobJob">岗位：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobJob" type="text" placeholder="请输入兼职岗位" name="jobJob" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobImg">兼职图片：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobImgText" type="text" placeholder="请百度一张兼职相关内容图片的url,比如：http://b.hiphotos.baidu.com/image/w%3D310/sign=a8f7c2cc5066d0167e199829a72bd498/4b90f603738da977a83ec72ab251f8198618e39a.jpg" name="jobImg" />
                                                    <!--<input type="hidden" name="jobImg" id="jobImg"/>-->
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobNeedNum">招聘人数：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobApplyCount" type="text" placeholder="请输入招聘人数" name="jobNeedNum" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobMoneyIntro">工资待遇：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobMoney" type="text" placeholder="请输入薪资待遇，如10元/小时，100元/天" name="jobMoneyIntro" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobMoney">预计薪资：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobMoneyTatol" type="text" placeholder="请输入预计得到的薪资" name="jobMoney" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="jobDeadline" class="col-lg-2 control-label">报名截止日</label>
                                                <div class="col-lg-10">
                                                    <input type="text" class="form-control datepicker" id="jobDeadline" placeholder="点击选择报名截止日" name="jobDeadline" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobPostDate">起始时间：</label>
                                                <div class="col-lg-4">
                                                    <input type="text" class="form-control datepicker" id="jobBegin" name="jobBegin" placeholder="点击选择日期" />
                                                </div>
                                                <div class="col-lg-1" style="margin:0;padding:0;width:1%;"><b>~</b></div>
                                                <div class="col-lg-4">
                                                    <input type="text" class="form-control datepicker" id="jobEnd" name="jobEnd" placeholder="点击选择日期" />
                                                    <span class="errorTips" id="errorTips"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-lg-2 control-label" for="jobTime">具体时间描述：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobTime" type="text" placeholder="请输入的具体的时间描述，即一天做几个小时或者时间点" name="jobTime" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div id="mapContainer"></div>
                                                <label class="col-lg-2 control-label" for="">选择地区：</label>
                                                <div class="col-lg-10">
                                                    <div id="tip" class="form-control">
                                                        省：<select  id='province' style="width:20%;" onchange='search(this)'></select>
                                                        市：<select id='city' style="width:20%;"  onchange='search(this)'></select>
                                                        区：<select id='district' style="width:20%;" name="city"  onchange='search(this)'></select>
                                                        <div style="display:none;"> 商圈：<select id='biz_area' style="width:100px"></select></div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label for="jobAddress" class="col-sm-2 control-label">详细地址：</label>
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobAddress" type="text" placeholder="请输入详细地址" name="jobAddress" />
                                                </div>
                                    </div>
                                            <div class="form-group">
                                                <!--<label class="col-lg-2 control-label" for="jobAddCode">地区代码：</label>-->
                                                <div class="col-lg-10">
                                                    <input class="form-control" id="jobAddCode" type="hidden" placeholder="地区代码" name="jobAddCode" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="jobIntro" class="col-sm-2 control-label">兼职介绍：</label>
                                                <div class="col-sm-10">
                                                    <textarea style="width:90%;height: 100px;min-height:100px;" id="job_info"></textarea>
                                                    <input type="hidden" name="jobIntro" id="jobIntro" />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="jobNeed" class="col-sm-2 control-label">岗位要求：</label>
                                                <div class="col-sm-10">
                                                    <textarea style="width:90%;height: 100px;min-height:100px;" id="job_request" ></textarea>
                                                    <input type="hidden" class="form-control" id="jobNeed" name="jobNeed" />
                                                </div>
                                            </div>
                                            <a id="submitButton" class="btn btn-primary">发布兼职</a>
                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--页脚，版权等问题-->
            <div class="footer">
                <div class="footer">
                    <div class="footer_right">
                        <span>&copy;2015-2015</span> <a href="index.html">诚客兼职 </a> 版权所有<span> 渝ICP备15004777号-1</span>
                    </div>
                </div>
            </div>
        </div>


        <script type="text/javascript" src="script/jquery-1.8.3.min.js"></script>
        <script type="text/javascript" src="bootstrap-3.3/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="script/twitter-bootstrap-hover-dropdown.min.js"></script>
        <script type="text/javascript" src="script/bootstrap-admin-theme-change-size.js"></script>
        <script type="text/javascript" src="bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
        <!--check-->
        <script type="text/javascript" src="script/checkPublicjob.js"></script>
        <!--check cookie-->
        <script type="text/javascript" src="script/getCookie.js"></script>
        <script>
            var cookiename = getCookieObj();
            if(cookiename.here){
                document.getElementById('username').innerHTML = decodeURI(cookiename.here);
            }else{
                window.location = 'firm-index.html';
            }
        </script>
        <!--maps-->
        <script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=c82931080d93698f3e194a9fc58c7417"></script>
        <script type="text/javascript">
            $('#submitButton').bind('click',function(){
                var city = $('#city').val();
                var province = $('#province').val();
                var district = $('#district').val();
//    alert(district);
                if(district == null ||district == "" || district == "--请选择--") {
                    district = city;
                }
                if(city == null || city=="" || city=="--请选择--"){
                    district = province;
                }
                $.get("/heihei.php/home/job/getCityCode",'city='+district,function(json){
//        alert(json.info);
                    if(json.data.length != 0){
                        load(json.data);
                    }else{
                        alert(json.info);
                    }
                });
                if(check()){
                    $.post('/heihei.php/home/job/addJob',$('form').serialize(),function(json){
                        if(json.status == 200){
                            alert('提交成功(●˘◡˘●)');
                        }else{
                            alert(json.info);
                        }
                    });
                }else{
                    alert("请检测你的数据");
                }
            });

//给 jobAddCode 赋值
            function load(data){
//                alert(data);
                document.getElementById('jobAddCode').value = data;
            }

        </script>

        <!--display map-->
        <!--<script type="text/javascript" src="script/dispalyMap.js"></script>-->
        <script type="text/javascript">
            $(function() {
                $('.datepicker').datepicker({
                    format:"yyyy-mm-dd"
                });
            });
        </script>


        <script type="text/javascript">
            var mapObj, district, polygons=[], citycode;
            var citySelect = document.getElementById('city');
            var districtSelect = document.getElementById('district');
//            var areaSelect = document.getElementById('biz_area');

            mapObj = new AMap.Map('mapContainer');

            var provinceList = ['北京市', '天津市', '河北省', '山西省', '内蒙古自治区', '辽宁省', '吉林省','黑龙江省', '上海市', '江苏省', '浙江省', '安徽省', '福建省', '江西省', '山东省','河南省', '湖北省', '湖南省', '广东省', '广西壮族自治区', '海南省', '重庆市','四川省', '贵州省', '云南省', '西藏自治区', '陕西省', '甘肃省', '青海省', '宁夏回族自治区', '新疆维吾尔自治区', '台灣', '香港特别行政区', '澳门特别行政区'];
            var provinceSelect = document.getElementById('province');
            var content = '<option>--请选择--</option>';
            for(var i =0, l = provinceList.length; i < l; i++){
                content += '<option value="'+provinceList[i]+'">'+provinceList[i]+'</option>';
                provinceSelect.innerHTML = content;
            }

            //行政区划查询

            AMap.service(["AMap.DistrictSearch"], function() {
                var opts = {
                    subdistrict: 1,   //返回下一级行政区
//                    extensions: 'all',  //返回行政区边界坐标组等具体信息
                    level:'city'  //查询行政级别为 市
                };

                //实例化DistrictSearch
                district = new AMap.DistrictSearch(opts);
            });



            function getData(e){
                var dList = e.districtList;
                for(var m = 0,ml = dList.length; m < ml; m++){
                    var list = e.districtList || [],
                            subList =[], level, nextLevel;
                    if(list.length >= 1) {
                        subList = list[0].districtList;
//                        level = list[0].level;
                    }

                    //清空下一级别的下拉列表
                    if(level === 'province'){
                        nextLevel = 'city';
                        citySelect.innerHTML = '';
                        districtSelect.innerHTML = '';
                        areaSelect.innerHTML = '';
                    }else if(level === 'city'){

                        nextLevel = 'district';
                        districtSelect.innerHTML = '';
                        areaSelect.innerHTML = '';
                    }/* else if(level === 'district') {

//                        nextLevel = 'biz_area';
                        areaSelect.innerHTML = '';
                    }*/

                    if(subList){
                        var contentSub = '<option>--请选择--</option>';
                        for(var i=0,l=subList.length; i<l; i++){
                            var name = subList[i].name;
                            var levelSub = subList[i].level;
//                            var cityCode = subList[i].citycode;
                            contentSub += '<option value="'+name+'">'+name+'</option>';
                            document.querySelector('#'+levelSub).innerHTML = contentSub;
                        }
                    }
                }
            }

            function search(obj){
                var option = obj[obj.options.selectedIndex];
                var keyword = option.text; //关键字
                //行政区查询
                district.search(keyword, function(status, result){
                    getData(result);
                });
            }
        </script>
    </body>
</html>
